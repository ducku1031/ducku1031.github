---
layout: post
title: "Ansible"
description: "Ansible"
categories: [Linux]
tags: [Devops, Ansible]
redirect_from:
  - /2020/08/21/
---

* Kramdown table of contents
{:toc .toc}


# Ansible

![w1](https://user-images.githubusercontent.com/69279022/90725238-d450fc00-e2fa-11ea-8d4d-c504b7ecce42.png)

- Ansible Core 

> 동작에 필요한 최소한의 Package   

- Ansible Tower

> - 편의성 증가   
> - GUI 지원   
> - 스케줄링 및 가시성 증가   

<br>

# Ansible 관련 파일

## /etc/ansible/ansible.cfg
> Ansible 환경 설정 파일   

## /etc/ansible/hosts
> Ansible이 접속하는 호스트들에 대한 정보   


# Ansible Core 설치

![z1](https://user-images.githubusercontent.com/69279022/90864781-47767300-e3cc-11ea-98de-fdc071741e85.png)

<br>

` EPEL Repository Install `
~~~
[user@server ~]$ sudo yum install epel-release
~~~
- Ansible Package를 설치하기 위해서는 사전에 EPEL-RPRO를 설치해야 한다.  

<br>

` Ansible Package Install `
~~~cpp
[user@server ~]$ sudo yum install ansible
~~~

<br>

` Ansible TEST `
~~~
[user@server ~]$ ansible all -m ping
[WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'
~~~
- Hosts List가 비어있어 정상적으로 되지 않는다고 나온다.

<br>

` /etc/ansible/hosts `
~~~
[user@server ~]$ sudo vi /etc/ansible/hosts
[web]
192.168.100.5
192.168.100.6
192.168.100.7
~~~
- 아무곳에 추가로 작성한다.
- **[web]"" 은 입력한 IP 들의 Group Name을 뜻한다.
<br>

` Ansible TEST `
~~~
[user@server ~]$ ansible --list-hosts all
  hosts (3):
    192.168.100.5
    192.168.100.6
    192.168.100.7
~~~
` 등록한 모든 Host 확인 `
~~~
[user@server ~]$ ansible all -m ping
192.168.100.6 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python"
    },
    "changed": false,
    "ping": "pong"
}
192.168.100.5 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python"
    },
    "changed": false,
    "ping": "pong"
}
192.168.100.7 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python"
    },
    "changed": false,
    "ping": "pong"
}
~~~
- 모든 Host에 Ping 명령어가 성공하였다
- 처음 ssh로 접속하는 경우 Public Key 교환으로 인한 질의를 할 수 도 있는데 yes를 입력 후 다시해보자.

<br>